{"componentChunkName":"component---src-templates-post-js","path":"/284b637c-1f63-5d21-af23-e2d01b9c819c","result":{"data":{"markdownRemark":{"html":"<h2 id=\"kubernetesのcicd\"><a href=\"#kubernetes%E3%81%AEcicd\" aria-label=\"kubernetesのcicd permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>kubernetesのCI/CD</h2>\n<p>jenkins, circle ci, spinnaker, argo ci/cd, jenkins xなどツール多すぎて意味がわからん。  </p>\n<p>まず、CI/CDのツールから整理する。  </p>\n<h3 id=\"ci\"><a href=\"#ci\" aria-label=\"ci permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CI</h3>\n<ul>\n<li>Jenkins<br>\nCloudNativeなツールではないイメージ。使いたくはない</li>\n<li>circleci<br>\nよく使っている</li>\n<li>github actions<br>\n最近流行っているイメージ、一度触ってみたい</li>\n<li>argo ci<br>\nargoが持っているCI機能, まだ開発中っぽい</li>\n</ul>\n<h3 id=\"cd\"><a href=\"#cd\" aria-label=\"cd permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CD</h3>\n<p>デプロイは個人的にはargo CDが良さそう。  </p>\n<p>GitOps</p>\n<ul>\n<li>コミット = 実インフラへのデプロイ</li>\n<li>全てgitで管理して変更もログで追うという考え</li>\n</ul>\n<p><a href=\"https://blog.cybozu.io/entry/2019/11/21/100000\">GitOpsベストプラクティス</a></p>\n<ol>\n<li>2つのリポジトリ：1つはアプリのソースコード用、もう1つはマニフェスト用\nアプリへの変更でリリースが走ることを回避する。<br>\n（CI/CDツール側でディレクトリ制御とかできないのかな）</li>\n<li>マニフェストを管理するリポジトリの数を適切に選ぶ</li>\n<li>コミットする前にマニフェストをテストする  </li>\n<li>Gitマニフェストは外部の変更により変更されるべきではない<br>\nhelmやらのバージョンは固定しておくべし</li>\n<li>\n<p>秘密の管理方法を計画する  </p>\n<ul>\n<li>Bitnami Sealed Secrets</li>\n<li>Godaddy Kubernetes External Secrets</li>\n<li>Hashicorp Vault</li>\n<li>Helm Secrets</li>\n<li>Kustomize secret generator plugins</li>\n</ul>\n</li>\n</ol>\n<p>ツール</p>\n<ul>\n<li>spinnaker<br>\nGitOpsツールではない  </li>\n<li>argo CD<br>\nGitOpsのためのk8s CDツール<br>\nGit管理のhelmとかをk8sにデプロイする</li>\n<li>flux</li>\n<li>Jenkins X  </li>\n</ul>\n<p>引用: <a href=\"https://argoproj.github.io/argo-cd/\">https://argoproj.github.io/argo-cd/</a>\n<img src=\"https://argoproj.github.io/argo-cd/assets/argocd_architecture.png\"></p>\n<h4 id=\"argo\"><a href=\"#argo\" aria-label=\"argo permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://argoproj.github.io/\">Argo</a></h4>\n<p>プロジェクトとして複数ある模様。  </p>\n<ul>\n<li>Workflow</li>\n<li>Events</li>\n<li>CD</li>\n<li>Rollouts</li>\n</ul>\n<p>PFNの人の記事が参考になる<br>\n<a href=\"https://www.slideshare.net/DaisukeTaniwaki/20190725-argo-project-latest-news\">https://www.slideshare.net/DaisukeTaniwaki/20190725-argo-project-latest-news</a></p>\n<blockquote>\n<p>spinnakerとの比較  </p>\n<ul>\n<li>EC2へのデプロイが前提</li>\n<li>k8s特有のリソース管理が難しい</li>\n<li>プロジェクトのメタデータがDB保存される</li>\n<li>構成がargo CDの方が簡単</li>\n</ul>\n</blockquote>\n<p>引用: <a href=\"https://www.inovex.de/blog/spinnaker-vs-argo-cd-vs-tekton-vs-jenkins-x/\">https://www.inovex.de/blog/spinnaker-vs-argo-cd-vs-tekton-vs-jenkins-x/</a>\n<img src=\"https://www.inovex.de/blog/wp-content/uploads/2019/07/argocd-workflow.png\"></p>\n<p>その他記事</p>\n<ul>\n<li><a href=\"https://qiita.com/kajitack/items/841d196c982b2ee1fad4\">https://qiita.com/kajitack/items/841d196c982b2ee1fad4</a><br>\n<a href=\"https://speakerdeck.com/amaya382/how-to-manage-credentials-on-gitops\">https://speakerdeck.com/amaya382/how-to-manage-credentials-on-gitops</a>\n秘匿情報を扱う方法についての情報をここで得た<br>\n秘匿情報をGitリポジトリに含める場合には、helm secretsが良いのか？  </li>\n</ul>","timeToRead":2,"excerpt":"kubernetesのCI/CD jenkins, circle ci, spinnaker, argo ci/cd, jenkins xなどツール多すぎて意味がわからん。   まず、CI/CDのツールから整理する。   CI Jenkins CloudNative…","frontmatter":{"title":"kubernetesのCI/CDについてツール多すぎてわけわからんかったのでまとめた","cover":"https://unsplash.it/1152/300/?random?BirchintheRoses","date":"2020-03-23-ops-k8s-cicd","categories":["Ops"],"tags":["kubernetes","CI/CD","GitOps"]},"fields":{"slug":"/284b637c-1f63-5d21-af23-e2d01b9c819c","date":"March 22, 2020"}}},"pageContext":{"slug":"/284b637c-1f63-5d21-af23-e2d01b9c819c","nexttitle":"統計検定準1級 やっていきます","nextslug":"/a520010f-a5c4-5e34-96fc-d49d3efe3def","prevtitle":"統計検定準1級-03 ~確率分布と母関数~","prevslug":"/f8789909-08fa-58f1-b24d-396fe18f7fda"}}}